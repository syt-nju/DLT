

<!-- å¼•å…¥ Solana Web3.js å’Œ bs58 -->
<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bs58@4.0.1/dist/index.umd.min.js"></script>

<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana DApp è½¬è´¦</title>
</head>
<body>
<h2>Solana DApp - è½¬è´¦</h2>
<label for="privateKey">ç§é’¥ï¼ˆBase58æ ¼å¼ï¼‰ï¼š</label>
<input type="text" id="privateKey" placeholder="è¾“å…¥ä½ çš„ç§é’¥"><br>

<label for="recipient">ç›®æ ‡è´¦æˆ·ï¼š</label>
<input type="text" id="recipient" placeholder="è¾“å…¥ç›®æ ‡åœ°å€"><br>

<label for="amount">è½¬è´¦é‡‘é¢ï¼ˆLamportsï¼‰ï¼š</label>
<input type="number" id="amount" placeholder="è¾“å…¥è½¬è´¦é‡‘é¢"><br>

<button onclick="sendTransaction()">æäº¤äº¤æ˜“</button>

<p id="status"></p>

<script>
    async function sendTransaction() {
        const privateKeyBase58 = document.getElementById("privateKey").value;
        const recipientAddress = document.getElementById("recipient").value;
        const amount = parseInt(document.getElementById("amount").value);

        if (!privateKeyBase58 || !recipientAddress || isNaN(amount) || amount <= 0) {
            document.getElementById("status").innerText = "è¯·è¾“å…¥æœ‰æ•ˆä¿¡æ¯ï¼";
            return;
        }

        document.getElementById("status").innerText = "æ­£åœ¨æäº¤äº¤æ˜“è¯·æ±‚...";

        try {
            // ä½¿ç”¨ fetch å‘åç«¯å‘é€è¯·æ±‚
            console.log(1111);
            const response = await fetch("/sendTransaction", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    privateKeyBase58,  // ğŸ”¥ è¿™é‡Œå¢åŠ ç§é’¥
                    recipient: recipientAddress,
                    amount
                }),
            });

            const result = await response.json();

            if (response.ok) {
                document.getElementById("status").innerText = `äº¤æ˜“æˆåŠŸï¼å“ˆå¸Œ: ${result.signature}`;
            } else {
                document.getElementById("status").innerText = `äº¤æ˜“å¤±è´¥: ${result.error}`;
            }
        } catch (error) {
            console.error("è¯·æ±‚å¤±è´¥:", error);
            document.getElementById("status").innerText = "äº¤æ˜“è¯·æ±‚å¤±è´¥ï¼";
        }
    }

</script>
</body>
</html>
